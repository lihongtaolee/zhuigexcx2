(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/tabs/index/index"],{3750:function(e,t,n){"use strict";var a=n("bd9b"),i=n.n(a);i.a},9081:function(e,t,n){"use strict";n.r(t);var a=n("9943"),i=n.n(a);for(var o in a)["default"].indexOf(o)<0&&function(e){n.d(t,e,(function(){return a[e]}))}(o);t["default"]=i.a},9943:function(e,t,n){"use strict";(function(e){var a=n("47a9");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n("7eb4")),o=a(n("ee10")),r=a(n("7aea")),u=a(n("f005")),l=a(n("b2e8")),c={components:{ZhuigeSwiper:function(){n.e("components/zhuige-swiper").then(function(){return resolve(n("2797"))}.bind(null,n)).catch(n.oe)},ZhuigeIcons:function(){n.e("components/zhuige-icons").then(function(){return resolve(n("2b26"))}.bind(null,n)).catch(n.oe)},zhuigeHeightPredict:function(){n.e("components/zhuige-height-predict").then(function(){return resolve(n("cae9"))}.bind(null,n)).catch(n.oe)},ZhuigeSgztmkModule:function(){n.e("components/zhuige-sgztmk-module").then(function(){return resolve(n("1b54"))}.bind(null,n)).catch(n.oe)}},data:function(){return{isLoading:!0,logo:void 0,style:"",slides:[],icons:[],heightData:this.getDefaultHeightData(),apiBaseUrl:"https://x.erquhealth.com/wp-json/zhuige/sgtool",sgztmkModules:[],isModulesLoading:!0,logoCacheKey:"zhuige_xcx_logo_cache",logoCacheTime:"zhuige_xcx_logo_cache_time"}},onLoad:function(){this.loadCachedLogo(),this.refresh(),this.fetchUserHeightData()},onShow:function(){this.loadCachedLogo(),this.refresh();var t=e.getStorageSync("zhuige_xcx_user");t&&t.user_id?this.fetchUserHeightData():this.heightData=this.getDefaultHeightData()},methods:{openLink:function(e){r.default.openLink(e)},refresh:function(){this.loadSetting()},loadCachedLogo:function(){var t=e.getStorageSync(this.logoCacheKey),n=e.getStorageSync(this.logoCacheTime),a=(new Date).getTime();t&&n&&a-n<864e5&&(this.logo=t,this.isLoading=!1)},loadSetting:function(){var t=this;l.default.post(u.default.URL("setting","home")).then((function(n){t.logo!==n.data.logo&&(t.logo=n.data.logo,e.setStorageSync(t.logoCacheKey,n.data.logo),e.setStorageSync(t.logoCacheTime,(new Date).getTime())),t.slides=n.data.slides,t.icons=n.data.icons,n.data.style&&(t.style=n.data.style),t.fetchSgztmkModules(),t.isLoading=!1})).catch((function(e){t.isLoading=!1}))},getDefaultHeightData:function(){return{currentHeight:165,geneticHeight:175,targetHeight:180,probability:85,baobaoname:"演示宝宝",updateTime:""}},fetchUserHeightData:function(){var t=this;return(0,o.default)(i.default.mark((function n(){var a,o,r;return i.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(a=e.getStorageSync("zhuige_xcx_user"),a&&a.user_id){n.next=5;break}return t.heightData=t.getDefaultHeightData(),t.isLoading=!1,n.abrupt("return");case 5:return n.prev=5,n.next=8,e.request({url:"".concat(t.apiBaseUrl,"/get_user_height_data"),method:"GET",data:{user_id:a.user_id},header:{"content-type":"application/json"}});case 8:o=n.sent,200===o.statusCode&&o.data&&0===o.data.code&&(r=o.data.data,r&&r.baobaoname&&r.current_height&&r.target_height&&r.prediction_probability?t.heightData={geneticHeight:Number(1===r.gender?r.boy_genetic_height:r.girl_genetic_height),currentHeight:Number(r.current_height),targetHeight:Number(r.target_height),probability:Number(r.prediction_probability),baobaoname:r.baobaoname,updateTime:r.create_time}:t.heightData=t.getDefaultHeightData()),n.next=16;break;case 12:n.prev=12,n.t0=n["catch"](5),e.showToast({title:"获取数据失败",icon:"none"}),t.heightData=t.getDefaultHeightData();case 16:return n.prev=16,t.isLoading=!1,n.finish(16);case 19:case"end":return n.stop()}}),n,null,[[5,12,16,19]])})))()},fetchSgztmkModules:function(){var t=this;return(0,o.default)(i.default.mark((function n(){var a,r;return i.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.isModulesLoading=!0,n.prev=1,n.next=4,l.default.post(u.default.URL("sgtool","get_sgztmk_modules"));case 4:if(a=n.sent,!a.data||!Array.isArray(a.data.modules)){n.next=12;break}return r=e.getStorageSync("zhuige_xcx_user"),n.next=9,Promise.all(a.data.modules.map(function(){var t=(0,o.default)(i.default.mark((function t(n){var a,o,u,l,c,s,d,g;return i.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!n.left_module.value_api){t.next=14;break}if(a="60",!r||!r.user_id){t.next=13;break}return t.prev=3,o=n.left_module.value_api.replace("{user_id}",r.user_id),t.next=7,e.request({url:o,method:"GET",header:{"content-type":"application/json"}});case 7:u=t.sent,u.data&&200===u.data.code&&u.data.data&&(l=u.data.data,Array.isArray(l)&&l.length>0&&(c=l[l.length-1],s=o.split("?")[1],d=s.match(/fields=([^&]*)/),g=d?d[1]:null,g&&void 0!==c[g]&&(a=Number(c[g]).toFixed(1)))),t.next=13;break;case 11:t.prev=11,t.t0=t["catch"](3);case 13:n.left_module.value=a;case 14:return t.abrupt("return",n);case 15:case"end":return t.stop()}}),t,null,[[3,11]])})));return function(e){return t.apply(this,arguments)}}()));case 9:t.sgztmkModules=n.sent,n.next=13;break;case 12:t.sgztmkModules=[];case 13:n.next=18;break;case 15:n.prev=15,n.t0=n["catch"](1),t.sgztmkModules=[];case 18:return n.prev=18,t.isModulesLoading=!1,n.finish(18);case 21:case"end":return n.stop()}}),n,null,[[1,15,18,21]])})))()}}};t.default=c}).call(this,n("df3c")["default"])},b77b:function(e,t,n){"use strict";n.r(t);var a=n("e204"),i=n("9081");for(var o in i)["default"].indexOf(o)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(o);n("3750");var r=n("828b"),u=Object(r["a"])(i["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],void 0);t["default"]=u.exports},bd9b:function(e,t,n){},e204:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return a}));var a={uniNavBar:function(){return n.e("uni_modules/uni-nav-bar/components/uni-nav-bar/uni-nav-bar").then(n.bind(null,"74ca"))},uniIcons:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uni-icons/components/uni-icons/uni-icons")]).then(n.bind(null,"ef62"))}},i=function(){var e=this,t=e.$createElement,n=(e._self._c,e.isLoading?null:e.slides&&e.slides.length>0),a=e.isLoading?null:e.icons&&e.icons.length>0,i=!e.isModulesLoading&&e.sgztmkModules&&e.sgztmkModules.length>0,o=i?e.__map(e.sgztmkModules,(function(t,n){var a=e.__get_orig(t),i={title:t.left_module.title,icon:t.icon,description:t.left_module.description,image:t.left_module.image,buttonText:t.left_module.button_text,link:t.left_module.link,value:t.left_module.value,bgColor:t.left_module.bg_color},o={title:t.right_top_module.title,description:t.right_top_module.description,image:t.right_top_module.image,buttonText:t.right_top_module.button_text,link:t.right_top_module.link,bgColor:t.right_top_module.bg_color},r={title:t.right_bottom_module.title,description:t.right_bottom_module.description,image:t.right_bottom_module.image,buttonText:t.right_bottom_module.button_text,link:t.right_bottom_module.link,bgColor:t.right_bottom_module.bg_color};return{$orig:a,a0:i,a1:o,a2:r}})):null;e.$mp.data=Object.assign({},{$root:{g0:n,g1:a,g2:i,l0:o}})},o=[]},ec72:function(e,t,n){"use strict";(function(e,t){var a=n("47a9");n("c4fa");a(n("3240"));var i=a(n("b77b"));e.__webpack_require_UNI_MP_PLUGIN__=n,t(i.default)}).call(this,n("3223")["default"],n("df3c")["createPage"])}},[["ec72","common/runtime","common/vendor"]]]);