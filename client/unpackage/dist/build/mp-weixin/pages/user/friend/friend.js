(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/user/friend/friend"],{"0a53":function(o,t,n){"use strict";(function(o,t){var e=n("47a9");n("c4fa");e(n("3240"));var a=e(n("348d"));o.__webpack_require_UNI_MP_PLUGIN__=n,t(a.default)}).call(this,n("3223")["default"],n("df3c")["createPage"])},"348d":function(o,t,n){"use strict";n.r(t);var e=n("a1a1"),a=n("5dfb");for(var l in a)["default"].indexOf(l)<0&&function(o){n.d(t,o,(function(){return a[o]}))}(l);n("d9d4");var i=n("828b"),s=Object(i["a"])(a["default"],e["b"],e["c"],!1,null,null,null,!1,e["a"],void 0);t["default"]=s.exports},3965:function(o,t,n){},"5dfb":function(o,t,n){"use strict";n.r(t);var e=n("83cd"),a=n.n(e);for(var l in e)["default"].indexOf(l)<0&&function(o){n.d(t,o,(function(){return e[o]}))}(l);t["default"]=a.a},"83cd":function(o,t,n){"use strict";(function(o){var e=n("47a9");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=e(n("7aea")),l=e(n("21c8")),i=e(n("f005")),s=e(n("b2e8")),r={components:{ZhuigeTab:function(){n.e("components/zhuige-tab").then(function(){return resolve(n("b7cb"))}.bind(null,n)).catch(n.oe)},ZhuigeNodata:function(){n.e("components/zhuige-nodata").then(function(){return resolve(n("bb50"))}.bind(null,n)).catch(n.oe)}},data:function(){return this.loginReload=!1,{tabs:[{id:"follow",title:"关注"},{id:"fans",title:"粉丝"}],cur_tab:"follow",loadMoreFollow:"more",follows:[],loadedFollow:!1,loadMoreFan:"more",fans:[],loadedFan:!1,noDataTip:"哇哦，什么也没有"}},onLoad:function(t){a.default.addShareScore(t.source),t.user_id&&(this.user_id=t.user_id),"fans"==t.tab?(this.cur_tab="fans",this.loadFans()):this.loadFollows(),o.$on("zhuige_event_user_login",this.onSetReload),o.$on("zhuige_event_follow_user",this.onFlollowUser)},onUnload:function(){o.$off("zhuige_event_follow_user",this.onFlollowUser),o.$off("zhuige_event_user_login",this.onSetReload)},onShow:function(){this.loginReload&&(this.loginReload=!1,this.refresh())},onShareAppMessage:function(){var o="pages/user/friend/friend?n=n";return this.user_id&&(o+="&user_id="+this.user_id),{title:"粉丝/关注-"+getApp().globalData.appName,path:a.default.addShareSource(o)}},onShareTimeline:function(){return{title:"粉丝/关注-"+getApp().globalData.appName}},onReachBottom:function(){"fans"==this.cur_tab?"more"==this.loadMoreFan&&this.loadFans():"more"==this.loadMoreFollow&&this.loadFollows()},methods:{onFlollowUser:function(o){for(var t=0;t<this.follows.length;t++)if(this.follows[t].user_id==o.user_id){this.follows[t].is_follow=o.is_follow;break}for(var n=0;n<this.fans.length;n++)if(this.fans[n].user_id==o.user_id){this.fans[n].is_follow=o.is_follow;break}},onSetReload:function(o){this.loginReload=!0},openLink:function(o){a.default.openLink(o)},refresh:function(){this.follows=[],this.loadMoreFollow="more",this.loadedFollow=!1,this.fans=[],this.loadMoreFan="more",this.loadedFan=!1,"fans"==this.cur_tab?this.loadFans():this.loadFollows()},clickTab:function(o){this.cur_tab=o.id,"fans"==this.cur_tab?0==this.fans.length&&this.loadFans():0==this.follows.length&&this.loadFollows()},clickFollowUser:function(t){s.default.post(i.default.URL("user","follow_user"),{user_id:t}).then((function(n){0==n.code?o.$emit("zhuige_event_follow_user",{user_id:t,is_follow:n.data.is_follow}):l.default.toast(n.message)}),(function(o){console.log(o)}))},loadFollows:function(){var o=this;if("loading"!=this.loadMoreFollow){this.loadMoreFollow="loading";var t={offset:this.follows.length};this.user_id&&(t.user_id=this.user_id),s.default.post(i.default.URL("user","my_follows"),t).then((function(t){o.follows=o.follows.concat(t.data.users),o.loadMoreFollow=t.data.more,o.loadedFollow=!0,t.data.tip?o.noDataTip=t.data.tip:o.noDataTip=void 0}),(function(o){console.log(o)}))}},loadFans:function(){var o=this;if("loading"!=this.loadMoreFan){this.loadMoreFan="loading";var t={offset:this.fans.length};this.user_id&&(t.user_id=this.user_id),s.default.post(i.default.URL("user","my_fans"),t).then((function(t){o.fans=o.fans.concat(t.data.users),o.loadMoreFan=t.data.more,o.loadedFan=!0,t.data.tip?o.noDataTip=t.data.tip:o.noDataTip=void 0}),(function(o){console.log(o)}))}}}};t.default=r}).call(this,n("df3c")["default"])},a1a1:function(o,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return l})),n.d(t,"a",(function(){return e}));var e={uniLoadMore:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uni-load-more/components/uni-load-more/uni-load-more")]).then(n.bind(null,"489a"))}},a=function(){var o=this,t=o.$createElement,n=(o._self._c,"follow"==o.cur_tab?o.follows.length:null),e="follow"==o.cur_tab&&o.follows.length>0,a="fans"==o.cur_tab?o.fans.length:null,l="fans"==o.cur_tab&&o.fans.length>0;o.$mp.data=Object.assign({},{$root:{g0:n,g1:e,g2:a,g3:l}})},l=[]},d9d4:function(o,t,n){"use strict";var e=n("3965"),a=n.n(e);a.a}},[["0a53","common/runtime","common/vendor"]]]);